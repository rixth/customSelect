(function(a){var b="ui-customSelect-open",c="ui-customRange-disabled",d="customselect";a.widget("ui.customSelect",{options:{placeholder:"Please select some items"},_create:function(){var e=this,f=this.element,g,h=[],i=!1;if(!f.is("select"))throw new TypeError("jquery.customSelect expects a <select> element.");e.rootId=f.attr("id")+"_customSelect",h.push('<div class="ui-customSelect">'),h.push('  <div class="ui-customSelect-window"><span></span>'),h.push('    <div class="ui-customSelect-arrow ui-customSelect-downArrow">&#x25BC;</div>'),h.push('    <div class="ui-customSelect-arrow ui-customSelect-upArrow">&#x25B2;</div>'),h.push("  </div>"),h.push('  <div class="ui-customSelect-dropdown"><ul></ul></div>'),h.push("</div>"),this.root=g=a(h.join("")).attr("id",e.rootId),f.after(g).hide(),this.window=g.find(".ui-customSelect-window span"),this.list=g.find("ul"),e._createFromSelect(),e._setWindowText(),e.window.parent().click(function(a){e._trigger(i?"blur":"focus",a)}),g.delegate("li>input","change",function(a){e._setWindowText(),f.val(e.getVal()).trigger("change"),e._trigger("change",a)}),f.bind(d+"focus",function(){g.hasClass(c)||(i=!0,g.addClass(b),a(document).bind("click.customRange"+e.rootId,function(b){a.contains(g[0],b.target)||e._trigger("blur")}))}).bind(d+"blur",function(){a(document).unbind("click.customRange"+e.rootId),i=!1,g.removeClass(b)}).bind(d+"disabled",function(){g.addClass(c),i&&e._trigger("blur")}).bind(d+"enabled",function(){g.removeClass(c)})},getVal:function(){var a=this.root.find("li>input:checked").map(function(){return this.value}).toArray();return a.length?a[this.isMultiple?"slice":"pop"]():this.isMultiple?[]:null},friendlyVal:function(){return this.root.find("input:checked+label").map(function(){return this.innerHTML}).toArray()},_setWindowText:function(){var a=this.friendlyVal();this.window.html(a.length?a.join(", "):this.options.placeholder||"")},_createFromSelect:function(){var b=this,c=0,d=b.list,e=d.prev()[0]||d.parent();b.isMultiple=b.element.attr("multiple"),d.empty(),this.element.children().each(function(){var e=this,f=b.rootId+"_"+c++,g='<label for="'+f+'">'+e.innerHTML+"</label>",h;b.isMultiple?h=a('<input id="'+f+'" type="checkbox" value="'+e.value+'">'):h=a('<input id="'+f+'" name="'+b.rootId+'_radio" type="radio" value="'+e.value+'">'),d.append(a("<li></li>").append(h).append(" ").append(g)),e.selected&&h.attr("checked",!0)})},reload:function(){this._createFromSelect()},_setOption:function(a,b){a==="disabled"&&this._trigger((b?"dis":"en")+"abled")},destroy:function(){a.Widget.prototype.destroy.apply(this,arguments),a(document).unbind("click.customRange"+this.rootId),this.root.remove(),this.element.show()}})})(jQuery)